:trophy: 이펙티브 자바 스터디 - 아이템 21

:book: 아이템 21: 인터페이스는 구현하는 쪽을 생각해 설계하라

## 1. 핵심
> **인터페이스에 메서드를 추가할 땐 기존 구현체들이 깨질 수 있음을 항상 고려해야 한다.** 자바 8부터 인터페이스에 `default method`를 넣을 수 있지만, **무조건 안전하지는 않다.**


## 2. 중요한 이유

인터페이스는 **다수의 구현체**가 있을 수 있음

-> 인터페이스를 변경하면 **모든 구현체가 영향을 받는다**

즉, **한 번 공개된 인터페이스는 수정이 거의 불가능하다고 생각해라**

## 3. 인터페이스에 메서드 추가가 위험한 이유

기존 인터페이스에 새로운 메서드를 추가하면

- 기존 구현 클래스에서 **컴파일 에러 발생** (abstract method 추가 시)
- 자바 8 이후 `default method`로 추가하더라도, **기존 구현과 충돌하거나, 예상치 못한 동작**을 유발할 수 있음

### 예시: default method가 문제를 일으키는 경우

```java
public interface MyInterface {
    default void hello() {
        System.out.println("Hello from interface");
    }
}

public class MyClass {
    public void hello() {
        System.out.println("Hello from class");
    }
}

public class Main extends MyClass implements MyInterface {
    public static void main(String[] args) {
        new Main().hello();
    }
}
```
Hello from class 가 출력된다.

- 클래스의 메서드가 우선 -> **인터페이스의 default 메서드는 무시됨**
- 이런 **우선순위 문제나 혼동이 생길 수 있다**

## 4. 안전하게 인터페이스 확장하는 방법

| 방법                  | 설명                                   |
| ------------------- | ------------------------------------ |
| 새 인터페이스로 분리         | 기존 인터페이스를 건드리지 않고 새로 만듦              |
| 추상 클래스 제공           | default 메서드 대신 추상 클래스를 제공하여 공통 구현 제공 |
| default method는 제한적으로 | 기본 구현이 **진짜로 대부분에게 적절할 때만** 사용       |


## 5. 인터페이스에 메서드를 추가해야 할 때 고려할 점

- 정말 기본 구현이 의미 있는가?
- 모든 구현 클래스에 적용해도 괜찮은가?
- **기존 동작을 바꾸는 부작용은 없는가?**

**default method는 도입의 편의성을 주지만, 유지보수 측면에서는 신중히 써야 한다.**


## 요약

| 항목   | 내용                           |
| ---- | ---------------------------- |
| 핵심   | 인터페이스 설계는 신중하게, 변경은 어렵다      |
| 위험   | default method도 안전하지 않음      |
| 권장   | 새 인터페이스 분리, 추상 클래스 제공 등으로 우회 |
| 우선순위 | 클래스 > 인터페이스 default 메서드      |

## 결론

> 인터페이스는 쉽게 수정할 수 없는 공개 API다. default method는 편리하지만, 반드시 안전한 건 아니다. 설계 초기부터 신중하게 정의하라.