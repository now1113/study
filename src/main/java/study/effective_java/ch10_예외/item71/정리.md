:trophy: 이펙티브 자바 스터디 - 아이템 71

:book: 아이템 71: 필요 없는 검사 예외 사용은 피하라

## 요지
- **검사예외(checked exception)** 는 호출자가 **실제로 복수할 수 있을 때만** 쓰자.
- 복구 가능성이 희박하거나 대부분의 클라이언트가 **잡아도 할 일이 없다면** 검사 예외를 쓰지 말고 **비검사(런타임) 예외나 다른 반환 방식**을 고려하자.

## 왜 불필요한 검사 예외가 문제일까
- **호출자에 불필요한 부담**: `try-catch` 또는 `throws` 전파를 **강제**하여 호출부가 지저분해진다.
- **API 사용성 저하**: 예외를 강제하지만 **복구 지침이 없거나 의미가 없으면** 사용자가 빈 `catch`/형식적인 전파만 하게된다.
- **조합성 저하**: 스트림/람다 등 함수형 API에서 검사 예외는 다루기 번거롭다(호출자가 우회 코드로 감싸야 함)

## 검사 예외 사용 판별 기준

### 호출자가 할 구체적 조치가 있는가
- 재시도, 대체 경로 선택, 사용자 입력 재요청, 설정 변경 등 **현실적 복구 시나리오가**가 있다 -> **검사 예외**
- 없다(잡아도 할 게 없음) -> **비검사 예외**나 다른 방식 권장.

### 복구 방법을 안내할 수 있는가
- 검사 예외를 던진다면 `@throws` 문서에 **언제 발생하며 무엇을 하면 복구되는지**를 분명히 적는다.
- 안내할 내용이 없다면 그 예외는 **검사 예외가 아닐 가능성**이 높다.

## 대안(검사 예외 대신 고려)

### 상태 검사 메서드 제공
- 실패 가능 연산에는 **사전 점검용 메서드**를 함께 제공하여 호출자가 **예외 없이** 정상 흐름으로 분기할 수 있게한다.
- ex) `hasNext()`, `next()`, `containsKey()`, `getOrDefault`, `canXxx()`, `tryXxx()` 등
- 주의: 동시성 환경에서 **TOCTOU** 문제가 없도록, 상태가 급변하지 않거나 원자적 시나리오가 되도록 설계.

### 반환 규약으로 표현
- 값의 **부재/실패가 정상적**일 수 있으면 **예외 대신 반환값으로 표현**한다.
- 단일 값: 필요 시 `Optional<T>`(남용 금지)
- 다수 값: ***빈 컬렉션**을 반환(예외, `null` 대신)

### 비검사(런타임) 예외
- **복구 불가능**하거나 **전제조건 위반**이라면 검사 예외 대신 **런타임 예외**로 신호화.

## 핵심
- **검사 예외는 드물고 값어치 있게**: 잡아서 의미 있는 일을 할 수 있을 때만
- 검사 예외를 채택했다면 **복구 방법을 문서화**하고, 가능하면 **상태 검사/대체 API**를 함께 제공해 **정상 흐름에서 예외 사용을 강요하지 않도록** 한다.
- 그 외에는 **비검사 예외 또는 반환 규약**으로 모델링하는 편이 대체로 더 낫다.

