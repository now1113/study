:trophy: 이펙티브 자바 스터디 - 아이템 72

:book: 아이템 72: 표준 예외를 사용하라

## 핵심
- **이미 있는 표준 예외(standard exception)를 최대한 재사용하자.**
- 그래야 **다른 개발자도 의미를 바로 이해**하고, **API 사용성, 일관성, 가독성**이 좋아진다.
- 자바 라이브러리는 대부분 API에서 쓰기에 충분한 수의 예외를 제공한다.

## 왜 표준 예외를 써야 할까

### 의미가 바로 읽힘
- `IllegalArgumentException`을 보면 "인자가 잘못됐다"는 의미로 널리 통용됨
- `IllegalStateException`을 보면 "객체의 현재 상태가 메서드 호출을 처리할 수 없다"는 의미로 널리 통용됨
- `IndexOutOfBoundsException`을 보면 "인덱스 범위가 틀렸다"는 걸 바로 알 수 있음.
- 이렇게 **자바/라이브러리 전반에서 공유하는 관례** 덕분에, 예외 타입만 봐도 대략 어떤 류의 문제인지 파악이 가능하다.

### API 일관성과 학습 비용 감소
- 여러 API가 **같은 상황에서 같은 표준 예외를 사용**하면,
  - 인자가 잘못되면 대체로 `IllegalArgumentException`
  - 객체 상태 문제면 `IllegalStateException`
- 이런 **예상 가능성이 올라가서** 새로운 API를 배울 때도 부담이 줄어든다.

### 디버깅, 문서화, 유지보수에 유리
- 예외 타입만 보고 어디서 어떤 종류의 문제가 났는지 추적이 쉬움.
- IDE, 문서, 검색 결과도 표준 예외 기준으로 자료가 많음.


## 널리 재사용되는 예외들

| 예외 타입                             | 언제 던지는 게 맞는지 (주요 쓰임)                              | 간단 예시                                                   |
| --------------------------------- | ------------------------------------------------- | ------------------------------------------------------- |
| `IllegalArgumentException`        | **null이 아닌 인자 값 자체가 부적절**할 때 (범위, 형식, 조건 위반 등)    | 나이 인자가 음수일 때, 페이지 사이즈가 0 이하일 때                          |
| `IllegalStateException`           | **객체의 현재 상태가 메서드 호출을 처리하기에 부적절**할 때               | 이미 종료된 객체에서 `close()`를 또 호출, 초기화 안 된 객체에서 사용 시도         |
| `NullPointerException`            | **null이 허용되지 않는 파라미터에 null이 넘어왔을 때**              | `Objects.requireNonNull(userId)` 실패                     |
| `IndexOutOfBoundsException`       | **인덱스 파라미터가 허용 범위를 벗어날 때**                        | `list.get(-1)`, `array[size]` 접근                        |
| `ConcurrentModificationException` | **동시 수정을 허용하지 않는 객체가, 순회 중 변경되는 등 동시 수정이 감지됐을 때** | `for-each` 돌면서 같은 컬렉션에 add/remove 하는 경우 (fail-fast 컬렉션) |
| `UnsupportedOperationException`   | **객체가 해당 연산(메서드)을 지원하지 않을 때**                     | 읽기 전용 리스트에서 `add()` 호출, 고정 크기 리스트에서 `remove()` 호출       |


## 정리
- **가능한 한 표준 예외를 사용하자**
  - `IllegalArgumentException`: 잘못된 인자
  - `NullPointerException`: 허용되지 않는 null
  - `IllegalStateException`: 객체 상태가 잘못됨
  - `IndexOutOfBoundsException`: 인덱스 범위 문제
  - `UnsupportedOperationException`: 지원하지 않는 연산
  - `ConcurrentModificationException`: 동시 수정 문제
  - `ClassCastException`: 잘못된 형변환